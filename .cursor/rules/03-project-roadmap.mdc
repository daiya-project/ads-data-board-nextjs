---
description: Migration roadmap — env, layout/sidebar, report UI, shared lib/utils, data connection
alwaysApply: true
---

# Project Migration Roadmap

This roadmap lists **migration steps only**. Detailed tasks, AS-IS/TO-BE paths, and checklists are in **`_docs/MIGRATION_ANALYSIS.md`** (sections 9.6, 10, 11). Use **`02-project-migration.mdc`** and the **`_reference/`** source when implementing each step.

## Phase 0 — Basic project environment

- Next.js (App Router), React, Tailwind, Shadcn/ui, Supabase client configured.
- Env vars, local run (`npm run dev`), build succeed.
- TypeScript, ESLint, structure match `00-project-main.mdc` and `01-project-structure-rule.mdc`.

**Done when:** App runs locally, builds cleanly, ready for layout and pages.

---

## Phase 1 — Shared modules (Foundation)

### 1.1 Shared types and utils
### 1.2 Shared API layer
### 1.3 Cache / request strategy (e.g. React Query)
### 1.4 Global CSS migration (tokens, base, layout)

**Done when:** Types, `lib/utils/`, `lib/api/` shape, and global styles are in place and importable.

---

## Phase 2 — Layout and navigation

### 2.1 AppShell → Root Layout
### 2.2 Sidebar → React component
### 2.3 Custom navigation removal (Next.js App Router)
### 2.4 Nested routes and layouts (e.g. reports, settings)
### 2.5 Route placeholders and page shells

**Done when:** Sidebar and layout work; navigation shows correct routes; no feature content required yet.

---

## Phase 3 — Feature migration

### 3.1 Dashboard
### 3.2 Reports
#### 3.2.1 Daily report
#### 3.2.2 Weekly report
### 3.3 Goal weekly
### 3.4 Goal monthly
### 3.5 Settings
#### 3.5.1 Goal setting
#### 3.5.2 Manager setting

**Done when:** Each feature’s UI and structure match the reference; data can be static/mock first.

---

## Phase 4 — Shared UI components

### 4.1 Toast / ToastProvider
### 4.2 Dropdown
### 4.3 DatePicker
### 4.4 Tabs
### 4.5 Table
### 4.6 Modal (e.g. DataUpdateModal)

**Done when:** Common UI used by features is available under `components/ui/` (or equivalent).

---

## Phase 5 — Data connection

- Connect report, dashboard, goal, and settings to real data (Supabase).
- Implement `lib/api/` (and hooks) for live data; Server/Client split and Zustand where needed.
- Respect `client_id` as string, date/workday rules per `31-term-main.mdc`.

**Done when:** Report (and other prioritized sections) load and display real data; behavior matches reference semantics.

---

## Workflow

- **Before starting:** Check this roadmap and `02-project-migration.mdc`; confirm which phase/step you are in.
- **After completing a step:** Mark progress (e.g. in this file’s checklist or in planning); proceed to the next step.
- **When in doubt:** Prefer completing an earlier phase before a later one (0 → 1 → 2 → 3 → 4 → 5).

## Checklist (phases)

- [x] Phase 0 — Basic project environment
- [ ] Phase 1 — Shared modules (Foundation)
- [ ] Phase 2 — Layout and navigation
- [ ] Phase 3 — Feature migration
- [ ] Phase 4 — Shared UI components
- [ ] Phase 5 — Data connection
